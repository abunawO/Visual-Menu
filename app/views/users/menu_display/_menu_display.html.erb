

<% @categories.each do |category_title, category_items| %>
    <div class='microposts-c'>
      <button class='microposts-title' onclick='openMicropostList(this)'>
        <span class='micropost-t-left'>
          <%= category_title %>
        </span>
        <span class='material-icons openListIcon'>keyboard_arrow_down</span>
      </button>

      <% if current_user %>
        <ol class="menu_display_user">
      <% else %>
        <ol class="menu_display_consumer">
      <% end %>
      <% category_items.each do |micropost|  %>
        <%= render :partial => "microposts/micropost_to_modal", locals: {micropost: micropost} %>
      <% end %>
    </div>
<% end %>

<script>
  function openMicropostList(self) {
    var micropostActiveIcon = self.querySelector('.openListIcon');
    self.parentElement.querySelector('ol').classList.toggle('active');
    micropostActiveIcon.textContent === 'keyboard_arrow_down'
    ? micropostActiveIcon.textContent = 'keyboard_arrow_up'
    : micropostActiveIcon.textContent = 'keyboard_arrow_down';
  }
</script>
