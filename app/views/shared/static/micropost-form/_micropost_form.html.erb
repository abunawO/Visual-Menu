<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.3/croppie.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.3/croppie.min.js"></script>

<div id='micropost-form' class='form-w active'>
    <div class='form-c'>
        
        <div class='form-header'>
            <p>Create Item</p>
            <button onclick="toggleMicropostForm()">
                <img src='/assets/close-icon.svg' alt='micropost-exit-button'>
            </button>
        </div>

        <div class='form-page'>
            <div id='image-selector'></div>
        </div>
        <div id='kshdasf'></div>
        <div class='form-footer'>
            <button onclick='imageRotation()'>next</button>
        </div>
    </div>
</div>

<script type="text/javascript">
// http://foliotek.github.io/Croppie/#documentation
var imageSelector = document.getElementById('image-selector');
var imageSize = imageSelector.offsetWidth;

var croppie = new Croppie(imageSelector, {
    viewport: { width: imageSize, height: imageSize },
    boundary: { width: imageSize, height: imageSize },
    showZoomer: false,
    enableOrientation: true
});

croppie.bind({
    // this url is where we first select image.
    url: 'assets/landing/img_1.jpg',
    // orientation: 6
});

function imageRotation() {
    croppie.rotate(90);
    // croppie.bind()
    return imageResult()
}
// croppie.rotate(180)
//on button click
function imageResult() {
    
    return croppie.result('base64').then(function(blob) {
        // do something with cropped blob
        // this is the end result..
        // this is where we upload the image
        console.log(blob)
        var img = document.createElement("IMG");
        img.setAttribute("src", blob);
        return document.getElementById('kshdasf').appendChild(img)
        
    });
}


</script>